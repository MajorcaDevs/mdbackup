


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="mdbackup documentation">
      
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.0">
    
    
      
        <title>Quick start - mdbackup documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.b5d04df8.min.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/palette.9ab2c1f8.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="preference" data-md-color-primary="" data-md-color-accent="">
  
    
      <script>matchMedia("(prefers-color-scheme: dark)").matches&&document.body.setAttribute("data-md-color-scheme","slate")</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#quick-start-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="mdbackup documentation" class="md-header-nav__button md-logo" aria-label="mdbackup documentation">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 21h16V8H4m10 7v3h-4v-3H7l5-5 5 5M3 3h18v4H3"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            mdbackup documentation
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Quick start
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/MajorcaDevs/mdbackup/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    MajorcaDevs/mdbackup
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="mdbackup documentation" class="md-nav__button md-logo" aria-label="mdbackup documentation">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 21h16V8H4m10 7v3h-4v-3H7l5-5 5 5M3 3h18v4H3"/></svg>

    </a>
    mdbackup documentation
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/MajorcaDevs/mdbackup/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    MajorcaDevs/mdbackup
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Quick start
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="Quick start" class="md-nav__link md-nav__link--active">
      Quick start
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#first-configuration" class="md-nav__link">
    First configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#injecting-environment-variables" class="md-nav__link">
    Injecting environment variables
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compression" class="md-nav__link">
    Compression
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#encrypt" class="md-nav__link">
    Encrypt
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upload-to-the-cloud" class="md-nav__link">
    Upload to the cloud
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-end" class="md-nav__link">
    The end
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../configuration/" title="Configuration" class="md-nav__link">
      Configuration
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Actions
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Actions" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Actions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../actions/" title="Actions overview" class="md-nav__link">
      Actions overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2">
    
    <label class="md-nav__link" for="nav-4-2">
      Builtin actions
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Builtin actions" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Builtin actions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../actions/archive/" title="Archive" class="md-nav__link">
      Archive
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../actions/command/" title="Command" class="md-nav__link">
      Command
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../actions/compress/" title="Compress" class="md-nav__link">
      Compress
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../actions/database/" title="Database" class="md-nav__link">
      Database
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../actions/directory/" title="Directory" class="md-nav__link">
      Directory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../actions/encrypt/" title="Encrypt" class="md-nav__link">
      Encrypt
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../actions/file/" title="File" class="md-nav__link">
      File
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../actions/network/" title="Network" class="md-nav__link">
      Network
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../tasks/" title="Tasks" class="md-nav__link">
      Tasks
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Storage providers
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Storage providers" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Storage providers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../storage/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../storage/gdrive/" title="Google Drive" class="md-nav__link">
      Google Drive
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../storage/s3/" title="S3" class="md-nav__link">
      S3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../storage/b2/" title="B2" class="md-nav__link">
      B2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../storage/ftp/" title="FTP(S)" class="md-nav__link">
      FTP(S)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../storage/sftp/" title="SFTP" class="md-nav__link">
      SFTP
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Secrets providers
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Secrets providers" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Secrets providers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../secrets/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../secrets/file/" title="File" class="md-nav__link">
      File
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../secrets/vault/" title="Vault" class="md-nav__link">
      Vault
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../hooks/" title="Hooks" class="md-nav__link">
      Hooks
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../arguments/" title="Arguments" class="md-nav__link">
      Arguments
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../run-as-service/" title="Run as a service" class="md-nav__link">
      Run as a service
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../docker/" title="Docker" class="md-nav__link">
      Docker
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#first-configuration" class="md-nav__link">
    First configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#injecting-environment-variables" class="md-nav__link">
    Injecting environment variables
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compression" class="md-nav__link">
    Compression
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#encrypt" class="md-nav__link">
    Encrypt
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upload-to-the-cloud" class="md-nav__link">
    Upload to the cloud
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-end" class="md-nav__link">
    The end
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/MajorcaDevs/mdbackup/blob/master/quick-start.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="quick-start-guide">Quick start guide<a class="headerlink" href="#quick-start-guide" title="Permanent link">&para;</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code>mdbackup</code> is tested under Linux and macOS, but it should work on any platform where Python has support on, except for Windows.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Python on macOS</p>
<p>On macOS, python 2 comes installed by default which is unsupported by this tool. On Catalina (10.15) or higher, also Python 3 is bundled. If you need to install an updated python version, <a href="https://brew.sh"><code>brew</code></a> is your saviour :)</p>
</div>
<p>In this guide, a virtual environment will be used to install and use the tool. It is not recommended to install it directly in the system.</p>
<p>First prepare the virtual environment. You can use <code>venv</code> or <code>virtualenv</code>, but the first will be used.</p>
<div class="highlight"><pre><span></span><code>python -m venv .venv
python -m virtualenv .venv
</code></pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code>python</code> here it is referred to the python 3 executable. In some platforms will be <code>python3</code>.</p>
</div>
<p>Once the environment is created, we must &ldquo;activate&rdquo; it:</p>
<div class="highlight"><pre><span></span><code>. .venv/bin/activate
</code></pre></div>

<div class="admonition info">
<p class="admonition-title">Info</p>
<p>It may be good idea to upgrade some basic packages after enabling the virtual environment: <code>pip install --upgrade pip setuptools wheel</code></p>
</div>
<p>Now you can use <code>python</code> and <code>pip</code> and everything will work from and install to the virtual environment. Now you can download the tool and install it:</p>
<div class="highlight"><pre><span></span><code><span class="c1">#Install using pip</span>
pip install mdbackup

<span class="c1">#You can also install the tool using the wheel package from GitHub:</span>
<span class="c1">#Check the latest release at https://github.com/MajorcaDevs/mdbackup/releases</span>

mdbackup --help
</code></pre></div>

<p>To check if the tool is installed properly, run the help of the tool and you should get something like <a href="../arguments/">this</a>.</p>
<p>You can also use the <a href="../docker/">Docker container</a>. But it is recommended to read the guide to get an idea.</p>
<h2 id="first-configuration">First configuration<a class="headerlink" href="#first-configuration" title="Permanent link">&para;</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This will get through getting an initial configuration for backups. To get in more detail, check out the <a href="../configuration/">Configuration</a> page.</p>
</div>
<p>In order to get your first backup, the tool must be configured properly. To achieve this, you will learn the core concepts used in the tool and how to use them to fit your needs.</p>
<p>The tool needs three folders to work:</p>
<ul>
<li><code>config</code>: a folder where the configuration, and other files related to configuration, tokens or cookies are going to be stored.</li>
<li><code>config/tasks</code>: a folder where the backup logic is stored in form of yaml or json files.</li>
<li>*put a full path here*: the folder, placed in some folder, where the backups are going to be stored.</li>
</ul>
<p>The folder in where you are right now should have the following structure:</p>
<ul>
<li><code>.venv/</code><ul>
<li>&hellip;</li>
</ul>
</li>
<li><code>config/</code><ul>
<li><code>config.json</code></li>
<li><code>tasks/</code><ul>
<li><code>01.yaml</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>And the third folder, it does not matter where is placed, but it will be used soon to store backups. It can be a network storage, an external drive or a partition in some local drive. It is recommended to store them outside the root partition (<code>/</code>), if possible.</p>
<p>Did you notice the <code>config.json</code>? This file holds the <a href="../configuration/">configuration</a> of the tool. Write in it the following:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;backupsPath&quot;</span><span class="p">:</span> <span class="s2">&quot;/the/path/to/the/folder/where/the/backups/are/going/to/be/stored&quot;</span><span class="p">,</span>
  <span class="nt">&quot;logLevel&quot;</span><span class="p">:</span> <span class="s2">&quot;DEBUG&quot;</span><span class="p">,</span>
  <span class="nt">&quot;env&quot;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can download the <a href="https://github.com/MajorcaDevs/mdbackup/releases/latest/download/config.schema.json">JSON Schema</a> and use it to validate the structure: <code>"$schema": "./config.schema.json",</code>. You can grab it from the latest release.</p>
</div>
<div class="admonition note">
<p class="admonition-title">yaml is an option</p>
<p>You can also use <code>yaml</code> for configuration and tasks file, if you prefer.</p>
</div>
<p>This configuration is really basic and tells the tool where to place the backups, which log level to use (will be very verbose, but it is OK for now) and to inject no extra environment variables.</p>
<p>Now we need to define the logic to create backups. We use the term <a href="../tasks">tasks</a> to refer a group of <a href="../actions">actions</a> that will run in order to backup something. Tasks can be grouped in a tasks definition file and stored in a json or yaml file inside the <code>config/tasks</code> folder. An action is just something that accepts an input and some parameters and transforms the input to something else, but it can be also something that writes the input to a file or a folder, or a source of data that does not receive any input and writes data as output.</p>
<p>The steps are executed following the natural order (alphanumeric order) of the names of the files. For example, <code>01.json</code> will run before <code>02.json</code>. It can be as many files as desired, or just one. It does not matter. So now we will give some contents to <code>01.yaml</code> (the file shown in the tree).</p>
<div class="tabbed-set" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><label for="__tabbed_1_1">YAML syntax</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="nt">name</span><span class="p">:</span> <span class="s">&#39;test&#39;</span>
<span class="nt">tasks</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Backup home</span>
    <span class="nt">actions</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">from-directory</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/home/user</span>  <span class="c1">#macOS users, use &quot;/Users/YourUser&quot;</span>
      <span class="p p-Indicator">-</span> <span class="nt">to-directory</span><span class="p">:</span>
          <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">home</span>
</code></pre></div>

</div>
<input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><label for="__tabbed_1_2">JSON syntax</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span>
  <span class="nt">&quot;tasks&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Backup home&quot;</span><span class="p">,</span>
      <span class="nt">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span> <span class="nt">&quot;from-directory&quot;</span><span class="p">:</span> <span class="s2">&quot;/home/user&quot;</span> <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">&quot;to-directory&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;home&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>

</div>
</div>
<p>This task will copy your home directory and all its contents into the backup folder. You can use any other folder you want just to try, this is an example.</p>
<p>Now try running the tool: <code>mdbackup</code>. If everything is well configured, you will have a new folder in the backups folder with the current date and time (in UTC) and with your folder copied inside. Well, try now to make a backup again. If the folder being copied is large enough, you will notice that this time, the backup took less time than the first time. This is because the action <code>to-directory</code> takes into account the previous backup and will try to do an incremental backup: if the file to copy already exists in the previous backup and has not been modified since the last time, then it will do a <code>hard-link</code> instead of a copy. This trick only works for some of the actions, check their documentation to know what are the ones doing this.</p>
<p>Note that <code>current</code> folder is always present and is a soft link to the latest backup. So it&rsquo;s easy to access to the latest backup from the file explorer or from the command line :)</p>
<p>Now you have backups of whatever you want! Just configure the tool and write the right scripts to fit your needs.</p>
<div class="admonition warning">
<p class="admonition-title">SuperUser rights may be needed</p>
<p>It is possible that you will need to run the tool as root to access some system folders. Remember that the virtual environment is not inherited when using <code>sudo</code>. Make your own script, or checkout one of <a href="https://github.com/MajorcaDevs/mdbackup/tree/master/contrib">the contrib folder</a>.</p>
</div>
<h2 id="injecting-environment-variables">Injecting environment variables<a class="headerlink" href="#injecting-environment-variables" title="Permanent link">&para;</a></h2>
<p><a href="../actions">Actions</a> receive parameters to be able to do their job. These parameters can be defined previously in <code>env</code> sections either in the config file, in the tasks definition file or inside a task. The value of a variable can refer to a secret, which is identified by using a <code>#</code> hashtag at the begining of the string. Secrets won&rsquo;t be covered in the quick start, but is good to know :)</p>
<p>Let&rsquo;s try to make a backup from a postgres database with the predefined action. For this example, <code>pg_dump</code> must be installed on the system.</p>
<p>Time to add a new tasks file called <code>02.yaml</code> with the following contents:</p>
<div class="tabbed-set" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><label for="__tabbed_2_1">YAML syntax</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">PostgreSQL example</span>
<span class="nt">env</span><span class="p">:</span>
  <span class="nt">host</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">localhost</span>
  <span class="nt">user</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">postgres</span>
  <span class="nt">password</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">WonderfulPassword123</span>
<span class="nt">tasks</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Postgres task example</span>
    <span class="nt">actions</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">postgres-database</span><span class="p">:</span>
          <span class="nt">database</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">test1</span>
      <span class="p p-Indicator">-</span> <span class="nt">to-file</span><span class="p">:</span>
          <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">test1.sql</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Postgres task example 2</span>
    <span class="nt">actions</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">postgres-database</span><span class="p">:</span>
          <span class="nt">database</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">test2</span>
      <span class="p p-Indicator">-</span> <span class="nt">to-file</span><span class="p">:</span>
          <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">test2.sql</span>
</code></pre></div>

</div>
<input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><label for="__tabbed_2_2">JSON syntax</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;PostgreSQL example&quot;</span><span class="p">,</span>
  <span class="nt">&quot;env&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
    <span class="nt">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;postgres&quot;</span><span class="p">,</span>
    <span class="nt">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;WonderfulPassword123&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;tasks&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Postgres task example&quot;</span><span class="p">,</span>
      <span class="nt">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">&quot;postgres-database&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;database&quot;</span><span class="p">:</span> <span class="s2">&quot;test1&quot;</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">&quot;to-file&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;test1.sql&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Postgres task example 2&quot;</span><span class="p">,</span>
      <span class="nt">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">&quot;postgres-database&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;database&quot;</span><span class="p">:</span> <span class="s2">&quot;test2&quot;</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">&quot;to-file&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;test2.sql&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>

</div>
</div>
<p>The tool will read the environment variables, and inject them in the actions parameters.</p>
<p>But wait, there&rsquo;s more: you can even place <code>${VARIABLE}</code> tokens in the parameters or other variables inside <code>env</code> sections to refer to real environment variables or variables on <code>env</code>s. This example will try to access to the database using the user running the tool:</p>
<div class="tabbed-set" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><label for="__tabbed_3_1">YAML syntax</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">PostgreSQL example</span>
<span class="nt">env</span><span class="p">:</span>
  <span class="nt">host</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">localhost</span>
  <span class="nt">user</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">${USER}</span>
<span class="nt">tasks</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Postgres task example</span>
    <span class="nt">actions</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">postgres-database</span><span class="p">:</span>
          <span class="nt">database</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">test1</span>
      <span class="p p-Indicator">-</span> <span class="nt">to-file</span><span class="p">:</span>
          <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">test1.sql</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Postgres task example 2</span>
    <span class="nt">actions</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">postgres-database</span><span class="p">:</span>
          <span class="nt">database</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">test2</span>
      <span class="p p-Indicator">-</span> <span class="nt">to-file</span><span class="p">:</span>
          <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">test2.sql</span>
</code></pre></div>

</div>
<input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><label for="__tabbed_3_2">JSON syntax</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;PostgreSQL example&quot;</span><span class="p">,</span>
  <span class="nt">&quot;env&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
    <span class="nt">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;${USER}&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;tasks&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Postgres task example&quot;</span><span class="p">,</span>
      <span class="nt">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">&quot;postgres-database&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;database&quot;</span><span class="p">:</span> <span class="s2">&quot;test1&quot;</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">&quot;to-file&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;test1.sql&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Postgres task example 2&quot;</span><span class="p">,</span>
      <span class="nt">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">&quot;postgres-database&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;database&quot;</span><span class="p">:</span> <span class="s2">&quot;test2&quot;</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">&quot;to-file&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;test2.sql&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>

</div>
</div>
<p>If everything went well, you now will have a <code>test1.sql</code> and <code>test2.sql</code> files in the backup folder.</p>
<div class="admonition info">
<p class="admonition-title">YAML is better for tasks</p>
<p>Check the YAML and JSON syntax in the examples for the tasks&hellip; We think that YAML is better for writing tasks, lesser to write and easier to understand.</p>
</div>
<h2 id="compression">Compression<a class="headerlink" href="#compression" title="Permanent link">&para;</a></h2>
<p>What if your postgres backup takes some MB and you think &ldquo;what if the file were compressed, will be a few KBs?&rdquo; You can add a compress action in the middle of the actions to compress the output. See the example:</p>
<div class="highlight"><pre><span></span><code><span class="nn">...</span>
    <span class="nt">actions</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">postgres-database</span><span class="p">:</span>
          <span class="nt">database</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">test1</span>
      <span class="p p-Indicator">-</span> <span class="nt">compress-gz</span><span class="p">:</span> <span class="p p-Indicator">{}</span>  <span class="c1">#Compress using `gzip` (the command)</span>
      <span class="p p-Indicator">-</span> <span class="nt">to-file</span><span class="p">:</span>
          <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">test1.sql.gz</span>
<span class="nn">...</span>
</code></pre></div>

<p>The <a href="../actions/compress#compress-gz"><code>compress-gz</code></a> action receives data as input and compresses it using <code>gzip</code> command. And that&rsquo;s how you compress some data.</p>
<p>In addition, when uploading folders to a storage provider, they automatically are archived into a <code>tar</code> file. If you want to save some bits, you can also compress them by adding the following configuration in the configuration file:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;...&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;compression&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;strategy&quot;</span><span class="p">:</span> <span class="s2">&quot;gzip&quot;</span><span class="p">,</span>
    <span class="nt">&quot;level&quot;</span><span class="p">:</span> <span class="mi">7</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<div class="admonition warning">
<p class="admonition-title">Extra tools needed for compression</p>
<p>Compression actions and cloud settings need to have installed the corresponding tool. <code>gzip</code> can be found in general installed in most Linux distros and macOS, but <code>xz</code> may not be installed in your system. Check the action&rsquo;s documentation to know which are the tools needed.</p>
</div>
<h2 id="encrypt">Encrypt<a class="headerlink" href="#encrypt" title="Permanent link">&para;</a></h2>
<p>You need <strong>OpenGPG 2</strong> in order to cypher files. And as well as the compression, will be used automatically to upload to storage providers.</p>
<p>Most Linux distributions have installed <code>gpg</code> tools, but you must check the version. On macOS, install <a href="https://gpgtools.org">GPGTools</a>.</p>
<p>There&rsquo;s two ways to encrypt data, in this guide will be using the passphrase. Here is a configuration example:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;...&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;cypher&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;strategy&quot;</span><span class="p">:</span> <span class="s2">&quot;gpg-passphrase&quot;</span><span class="p">,</span>
    <span class="nt">&quot;passphrase&quot;</span><span class="p">:</span> <span class="s2">&quot;ThisIsAPassphrase321&quot;</span><span class="p">,</span>
    <span class="nt">&quot;algorithm&quot;</span><span class="p">:</span> <span class="s2">&quot;AES256&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>But, if instead what you want is to encrypt a file in a task, there is an action for you:</p>
<div class="highlight"><pre><span></span><code><span class="nn">...</span>
    <span class="nt">actions</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">postgres-database</span><span class="p">:</span>
          <span class="nt">database</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">test1</span>
      <span class="p p-Indicator">-</span> <span class="nt">encrypt-gpg</span><span class="p">:</span>
          <span class="nt">passphrase</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AVeryPowerfulPassw0rd:)</span>
      <span class="p p-Indicator">-</span> <span class="nt">to-file</span><span class="p">:</span>
          <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">test1.sql.asc</span>
<span class="nn">...</span>
</code></pre></div>

<p>The <a href="../actions/encrypt#encrypt-gpg"><code>encrypt-gpg</code></a> action will use <code>gpg</code> to encrypt the input data. You may even compress and encrypt the data in a task (preferible in this order):</p>
<div class="highlight"><pre><span></span><code><span class="nn">...</span>
    <span class="nt">actions</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">postgres-database</span><span class="p">:</span>
          <span class="nt">database</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">test1</span>
      <span class="p p-Indicator">-</span> <span class="nt">compress-gz</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
      <span class="p p-Indicator">-</span> <span class="nt">encrypt-gpg</span><span class="p">:</span>
          <span class="nt">passphrase</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AVeryPowerfulPassw0rd:)</span>
      <span class="p p-Indicator">-</span> <span class="nt">to-file</span><span class="p">:</span>
          <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">test1.sql.asc</span>
<span class="nn">...</span>
</code></pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The algorithm changes between distributions. Check the available in <code>gpg --version</code>. In this guide we will be using AES256.</p>
</div>
<h2 id="upload-to-the-cloud">Upload to the cloud<a class="headerlink" href="#upload-to-the-cloud" title="Permanent link">&para;</a></h2>
<p>Well, you can also use an FTP server for this, but it&rsquo;s cool to say <em>&ldquo;TO THE CLOUD&rdquo;</em>.</p>
<p>If desired, the backups can be uploaded to what we call &ldquo;storage provider&rdquo;. It can be a FTP or SFTP server, or a Cloud Storage (like S3 or Google Drive). This is run after the backup is done, and can be uploaded to one or more storage providers. Also to speed up the upload, the folders are written into a <code>tar</code> file, compressed (if configured) and encrypted (if configured).</p>
<blockquote>
<p>It is recommended to, at least, configure the compression in order to save some storage at the cloud.</p>
</blockquote>
<p>There are many <a href="./storage">storage providers</a> to choose. In the guide FTP will be used to quickly show how to upload files. <em>Also because this is the only storage provider that does not need to install any extra packages.</em></p>
<p>This is the configuration for the FTP:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;...&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
  <span class="nt">&quot;storage&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;ftp&quot;</span><span class="p">,</span>
      <span class="nt">&quot;backupsPath&quot;</span><span class="p">:</span> <span class="s2">&quot;/backups&quot;</span><span class="p">,</span>
      <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;ftp.local&quot;</span><span class="p">,</span>
      <span class="nt">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;anonymous&quot;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>

<p>This will upload the files to the FTP server <code>ftp.local</code>, in the folder <code>/backups</code> using the <code>anonymous</code> user and no password.</p>
<h2 id="the-end">The end<a class="headerlink" href="#the-end" title="Permanent link">&para;</a></h2>
<p>There&rsquo;s more to learn about the tool, but this is a rather good introduction to it. Take a look to the other sections of this documentation to learn and discover new stuff of the tool.</p>
<p>Concerned about too much hardcoded credentials in the configuration file? Check out the <a href="../secrets">Secret backends</a>.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href=".." title="Home" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Home
              </div>
            </div>
          </a>
        
        
          <a href="../configuration/" title="Configuration" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Configuration
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            MajorcaDevs 2019
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.92ffa368.min.js"></script>
      <script src="../assets/javascripts/bundle.5123e3d4.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: ["instant"],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.a68abb33.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>